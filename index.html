<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>Python Web Frameworks</title>

        <meta name="author" content="Daniel Nephin">

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <link rel="stylesheet" href="reveal.js/css/reveal.min.css">
        <link rel="stylesheet" href="reveal.js/css/theme/default.css" id="theme">

        <link href='http://fonts.googleapis.com/css?family=PT+Sans' rel='stylesheet' type='text/css'>
        <link href='http://fonts.googleapis.com/css?family=Monda' rel='stylesheet' type='text/css'>

        <!-- For syntax highlighting -->
        <link rel="stylesheet" href="css/highlight-themes/hemisu-light.css">

        <!-- If the query includes 'print-pdf', use the PDF print sheet -->
        <script>
            var css = window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper';
            document.write( '<link rel="stylesheet" href="reveal.js/css/print/' + css + 
                            '.css" type="text/css" media="print">' );
        </script>

        <!--[if lt IE 9]>
        <script src="reveal.js/lib/js/html5shiv.js"></script>
        <![endif]-->

        <script src="reveal.js/lib/js/head.min.js"></script>
    <style>
.reveal {
  font-family: 'PT Sans', sans-serif;
}

.reveal h1, .reveal h2, .reveal h3, .reveal h4 {
  text-transform: none;
  font-family: 'Monda', sans-serif;
  letter-spacing: normal;
}

.reveal pre code.http {
    padding: 5px 2em;
}

.reveal blockquote {
  padding: 2em;
}

.reveal pre code {
  margin: 0 auto;
  max-height: none;
}

.reveal pre {
  font-size: 0.7em;
}

.reveal pre.span50 { width: 50%; }
.reveal pre.span60 { width: 60%; }
.reveal pre.span65 { width: 65%; }
.reveal pre.span70 { width: 70%; }
.reveal pre.span80 { width: 80%; }
.reveal pre.span95 { width: 95%; }

    </style>
    </head>

    <body>

        <div class="reveal">
            <div class="slides">
<section>
    <h1>Python Web Frameworks</h1>
</section>

<section>
  <blockquote>
  a collection of packages or modules which allow developers to write
  web applications or services.
  </blockquote>
</section>

<section>
    <h2>What is a web app?</h2>
    <ul>
        <li>receive an HTTP request</li>
        <li>do something</li>
        <li>return an HTTP response</li>
    </ul>
</section>

<section>
    <h3>The Request</h3>
    <pre class="span50"><code class="http">
GET / HTTP/1.1
Host: python.org
User-Agent: Chrome
    </code></pre>
</section>

<section>
    <pre><code class="python">
    print("HTTP/1.1 200 OK\r\n\r\n"
          "&lt;html&gt;&lt;body&gt;Hello&lt;/body&gt;&lt;/html&gt;\r\n")

    </code></pre>
</section>

<section>
    <h3>The Response</h3>
    <pre class="span65"><code class="http">
HTTP/1.1 200 OK

&lt;html&gt;&lt;body&gt;Hello&lt;/body&gt;&lt;/html&gt;
    </code></pre>
</section>

<section>
    <h3>The Old Way</h3>
    <ul>
        <li>common gateway interface (cgi)</li>
        <li>mod_python</li>
    </ul>
</section>

<section>
    <h2>WSGI</h2>
    <p>
        <a href="http://www.python.org/dev/peps/pep-0333/">PEP 333</a>
    </p>
    <blockquote>
a standard interface between web servers and Python web applications or frameworks, to promote web application portability across a variety of web servers
    </blockquote>
</section>

<section>
    <h3>WSGI application</h3>
    <pre class="span95"><code class="python">
  def simple_app(environ, start_response):
      status = '200 OK'
      response_headers = [('Content-type', 'text/plain')]
      start_response(status, response_headers)
      return ['Hello world!\n']
    </code></pre>
</section>


<section>
    <dl>
        <dt>environ</dt>
        <dl>dictionary of environment variables from the request</dl>
        <dt>start_response</dt>
        <dl>callable used to set status and headers</dl>
    </dl>
    <h3>&#x2193;</h3>
    <p>iteration of strings</p>
</section>

<section>
    <h2>Why Frameworks?</h2>
    <ul>
        <li>request routing</li>
        <li>input validation</li>
        <li>data persistence</li>
        <li>response templating</li>
        <li>convention</li>
    </ul>
</section>

<section>
    <section>
        <h2>Routing</h2>
        <p>/some/restful/url <strong>&#x2192;</strong> webapp.views.get_url()</p> 
    </section>

    <section>
        <h3>Decorators</h3>
        <p><em>frameworks: Flask, Bottle, Pyramid</em></p>
        
        <pre class="span60"><code class="python">
    @app.route("/hello/plain")
    def hello_view():
        return "Hello World!"
        </code></pre>
    </section>

    <section>
        <h3>Regex / Patterns</h3>
        <p><em>frameworks: Django, web.py, web2py</em></p>
        
        <pre class="span70"><code class="python">
  urlpatterns = patterns('',
      url(r'^articles/(\d{4})/$',
          'news.views.year_archive'),
      ...
  )
        </code></pre>
    </section>

    <section>
        <h3>Traversal / Object Dispatch</h3>
        <p><em>frameworks: Twisted, TurboGears, CherryPy</em></p>
        <pre class="span80"><code class="python">
    class MovieController(BaseController):

        @expose()
        def list(self):
            return 'hello'

    class RootController(BaseController):
        movie = MovieController() 
        </code></pre>
    </section>

</section>

<section>
    <section>
        <h2>Validation</h2>
        <div>
            <pre><code class="http">
POST /event/34/register HTTP/1.1

name=Daniel&amp;guests=4&amp;date=2013-05-01
            </code></pre>
        </div>

        <div><strong>&#x2193;</strong></div>

        <div>
            <pre><code class="python">
    event_id = 34
    details = {
        'name': 'Daniel',
        'guests': 4,
        'date': datetime.date(2013, 5, 1)
    }
            </code></pre>
        </div>
    </section>

    <section>
        <h3>Request Objects</h3>
        <p><em>libraries: WebOb, Werkzeug</em></p>
        <pre class="span50"><code class="python">
  request = Request(environ)
  request.body
  request.headers
  request.GET
  ...
        </code></pre>
    </section>

    <section>
        <h3>Forms</h3>
        <p><em>libraries: WTForms, django.forms, web.py</em></p>
        <pre><code class="python">
  class MyForm(Form):
      first_name = TextField(
          u'First Name'
          validators=[validators.required()])

      last_name  = TextField(
          u'Last Name',
          validators=[validators.optional()])
        </code></pre>
    </section>
    <section>
        <h3>Schemas</h3>
        <p><em>libraries: colander</em></p>
        <pre><code class="python">
  class Person(colander.MappingSchema):

      name = colander.SchemaNode(colander.String())

      age  = colander.SchemaNode(colander.Integer(),
                 validator=colander.Range(0, 200))
        </code></pre>
    </section>
</section>

<section>
    <section>
      <h2>Persistence</h2>
      <ul>
        <li>relational databases</li>
        <li>key-value stores</li>
        <li>document stores</li>
      </ul>
    </section>

    <section>
      <h2>ORM</h2>
        <p><em>libraries: Django, sqlalchemy, web2py</em></p>
      <pre><code class="python">
 class User(db.Model):
     id       = db.Column(db.Integer, primary_key=True)
     username = db.Column(db.String(80), unique=True)
     email    = db.Column(db.String(120), unique=True)
      </code></pre>
    </section>
</section>

<section>
  <section>
    <h2>Templating</h2>
        <div>
            <pre><code class="python">
  context = {
      'name': 'Python Dev',
      'location': 'Edmonton'
  }
            </code></pre>
        </div>

        <div><strong>&#x2193;</strong></div>

        <div>
            <pre><code class="html">
  &lt;div&gt;
    &lt;h3&gt;Python Dev&lt;/h3&gt;
    &lt;p&gt;&lt;strong&gt;Location:&lt;/strong&gt; Edmonton&lt;/p&gt;
  &lt;/div&gt;
            </code></pre>
        </div>
  </section>

  <section>
    <h3>Mako</h3>
    <pre class="span70"><code>
  &lt;table&gt;
      % for row in rows:
          ${makerow(row)}
      % endfor
  &lt;/table&gt;
  &lt;%def name="makerow(row)"&gt;
      &lt;tr&gt;
      % for name in row:
          &lt;td&gt;${name}&lt;/td&gt;\
      % endfor
      &lt;/tr&gt;
  &lt;/%def&gt;
    </code></pre>
  </section>

  <section>
    <h3>Jinja / Django</h3>
    <pre class="span80"><code class="html">
  {% for item in navigation %}
      &lt;li&gt;
        &lt;a href="{{ item.href }}"&gt;
            {{ item.caption|lower }}&lt;/a&gt;
      &lt;/li&gt;
  {% endfor %}
    </code></pre>
  </section>

  <section>
    <h3>Mustache</h3>
    <pre><code class="html">
  {{#items}}
    {{#first}}
      &lt;li&gt;&lt;strong&gt;{{name}}&lt;/strong&gt;&lt;/li&gt;
    {{/first}}
    {{#link}}
      &lt;li&gt;&lt;a href="{{url}}"&gt;{{name}}&lt;/a&gt;&lt;/li&gt;
    {{/link}}
  {{/items}}
    </code></pre>
  </section>

</section>

<section>
  <section>
    <h2>Extensions</h2>
  </section>

  <section>
    <h3>Django</h3>
    <p>Middleware</p>
    <ul>
      <li>
        Request
        <ul>
          <li>process_request()</li>
          <li>process_view()</li>
        </ul>
      </li>
      <li>Response
        <ul>
          <li>process_exception()</li>
          <li>process_template_response()</li>
          <li>process_response()</li>
        </ul>
      </li>
    </ul>
  </section>

  <section>
    <h3>Bottle</h3>
    <p>Hooks, and Plugins</p>
    <pre class="span70"><code class="html">
  @hook('before_request')
  def check_permissions():
      ...

  @hook('after_request')
  def enable_cors():
      response.headers['X-Served'] = 1
    </code></pre>
  </section>

  <section>
    <h3>Pyramid</h3>
    <ul>
      <li>error views hook</li>
      <li>request factory hook</li>
      <li>before render event</li>
      <li>response callbacks</li>
      <li>finished callbacks</li>
      <li>traverser hook</li>
      <li>configuration decorators</li>
      <li>tweens</li>
    </ul>
  </section>

</section>

<section>
 <h3>Why use a web framework?</h3> 
 <ul class="fragment">
   <li>conventions</li>
   <li>documentation</li>
 </ul>

</section>

<section>
    <h2>Read More</h2>
    <p><a href="http://wsgi.org">wsgi.org</a></p>
</section>
            </div>
        </div>

        <script src="reveal.js/js/reveal.min.js"></script>
        <script>

            // Full list of configuration options available here:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls:       false,
                progress:       true,
                history:        true,
                center:         true,
                rollingLinks:   false,
                transition:     'linear', // default/cube/page/concave/zoom/linear/fade/none
                theme:          'solarized',

                dependencies: [
                    { src: 'reveal.js/lib/js/classList.js',
                      condition: function() { return !document.body.classList; } },
                    { src: 'reveal.js/plugin/markdown/marked.js',
                      condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'reveal.js/plugin/markdown/markdown.js',
                      condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'reveal.js/plugin/highlight/highlight.js', async: true,
                      callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'reveal.js/plugin/zoom-js/zoom.js', async: true,
                      condition: function() { return !!document.body.classList; } },
                    { src: 'reveal.js/plugin/notes/notes.js', async: true,
                      condition: function() { return !!document.body.classList; } }
                    /*
                    { src: 'reveal.js/plugin/search/search.js', async: true,
                      condition: function() { return !!document.body.classList; } }
                    { src: 'reveal.js/plugin/remotes/remotes.js', async: true,
                      condition: function() { return !!document.body.classList; } }
                    */
                ]
            });

        </script>

    </body>
</html>
